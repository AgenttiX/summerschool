---
title: Application performance
event: CSC Summer School in High-Performance Computing 2025
lang:  en
---

# Overview

- Two CPU profiling toolsets
    - perf: single node
    - Score-P/Scalasca: 1 to N nodes

# perf

- https://perfwiki.github.io/main/
- part of Linux since kernel version 2.6.31 in 2009
- statistical performance profiling
- hardware counters

# perf subcommands

::: incremental

- **list**: list available events
- **stat**: measure total event count for single program or for system for some time
- **record**: measure and save sampling data for single program
- **report**: analyze file generated by perf record; can generate flat, or graph profile
- top: top-like dynamic view of hottest functions
- annotate: annotate sources or assembly
- sched: tracing/measuring of scheduler actions and latencies

:::

# perf on supercomputers

- **Single node** CPU performance sampling, regardless of parallellization method
    - MPI
    - OpenMP
    - MPI + OpenMP
    - pthreads
    - fork/join

# perf demo

[Demo](../demos/perf/README.md)

- list
- stat
- record
- report
- flamegraphs

# Score-P

::: incremental

- https://www.vi-hps.org/projects/score-p
- instrumentation and measurement of codes MPI + OpenMP
- jointly developed by a consortium of partners from Germany & US
- common data formats for profiles & traces
    - used by e.g. Scalasca, TAU, Vampir...

:::

# Scalasca

::: incremental

- https://www.scalasca.org/
- targets MPI and OpenMP, separately or together
- measure and visualize time spent on computation, communication and synchronization
- based on Score-P

:::

# Scalasca workflow

::: incremental

1. Measure run time without instrumentation: baseline
2. Instrument with Score-P
3. Measure with instrumentation: overhead
4. Filter functions from instrumentation: reduce overhead
5. Measure with filter: go back to 4 if necessary
6. Profile or trace with filter
7. Analyze profile or trace

:::

# Scalasca demo

[Demo](../demos/scalasca/README.md)

- generating a filter file
- profiling hybrid MPI + OpenMP application
- tracing hybrid MPI + OpenMP application

# Summary

- perf
    - single node
    - performance counters
    - statistical profile
- Scalasca
    - multi-node
    - MPI + OpenMP
    - computation
    - communication
    - synchronization
